(function(){"use strict";var t={6712:function(t,e,n){var s=n(7764),o=n(8808),a=n(4108),i=n(2500),l=(n(3248),n(2964)),r=n(7464),u=n(9096);const c=t=>((0,a.ED)("data-v-be86b8a0"),t=t(),(0,a.ii)(),t),d={key:0,class:"editor"},k={class:"banner"},p={class:"main"},h={class:"head"},v={class:"info"},f=c((()=>(0,a.QD)("h1",null,"Notes",-1))),g={class:"counter"},m={class:"add"},D={class:"body"},Q=["onClick"],w={class:"title"},T={class:"extract"},b={class:"date"};var y={__name:"NotesView",setup(t){const e=ct(),n=(0,i.IL)(!1),l=(0,i.IL)({}),r=(0,i.IL)({}),{notesCounter:c,notes:y}=(0,o.Ou)(e);return(t,o)=>((0,a.Wz)(),(0,a.An)(a.ae,null,[n.value?((0,a.Wz)(),(0,a.An)("div",d,[(0,a.QD)("div",k,[(0,a.QD)("button",{onClick:o[0]||(o[0]=t=>{n.value=!1,l.value={},r.value={}})},"⧼"),(0,a.QD)("button",{onClick:o[1]||(o[1]=t=>{n.value=!1,(0,i.KV)(e).updateNotes(l.value,r.value)})},"✓")]),(0,a.wt)((0,a.QD)("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=t=>r.value.title=t),class:"title",onFocusout:o[3]||(o[3]=t=>{(0,i.KV)(e).updateNotes(l.value,r.value),l.value={...r.value}})},null,544),[[s.Og,r.value.title]]),(0,a.wt)((0,a.QD)("textarea",{"onUpdate:modelValue":o[4]||(o[4]=t=>r.value.note=t),class:"content",onFocusout:o[5]||(o[5]=t=>{(0,i.KV)(e).updateNotes(l.value,r.value),l.value={...r.value}})},null,544),[[s.Og,r.value.note]])])):(0,a.g1)("",!0),(0,a.QD)("div",p,[(0,a.QD)("div",h,[(0,a.QD)("div",v,[f,(0,a.QD)("p",g,(0,u.WA)((0,i.KV)(c))+" notes",1)]),(0,a.QD)("div",m,[(0,a.QD)("button",{onClick:o[6]||(o[6]=t=>{r.value={title:"New note",note:"",timestamp:Date.now()/1e3,tags:[]},l.value=null,n.value=!0})},"+")])]),(0,a.QD)("div",D,[((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)((0,i.KV)(y),(t=>((0,a.Wz)(),(0,a.An)("a",{class:"note",key:t.key,onClick:e=>{n.value=!0,l.value={...t},r.value={...t}}},[(0,a.QD)("h2",w,(0,u.WA)(t.title),1),(0,a.QD)("p",T,(0,u.WA)(t.note),1),(0,a.QD)("p",b,(0,u.WA)(new Date(1e3*t.timestamp).toUTCString().slice(0,16)),1)],8,Q)))),128))])])],64))}},V=n(4100);const O=(0,V.c)(y,[["__scopeId","data-v-be86b8a0"]]);var A=O;const N=t=>((0,a.ED)("data-v-67bb9f36"),t=t(),(0,a.ii)(),t),S={class:"main"},C={class:"head"},W={class:"info"},K=N((()=>(0,a.QD)("h1",null,"Tasks",-1))),_={class:"counter"},I={class:"add"},z={class:"body"},F={class:"tinfo"},U=["onUpdate:modelValue","onClick"],x=["onUpdate:modelValue"],j={class:"date"},E={class:"tinfo"},J=["onUpdate:modelValue","onClick"],L={class:"date"};var Y={__name:"TasksView",setup(t){const e=ct(),{tasksCounter:n,tasks:l,doneTasks:r,doneTasksCounter:c}=(0,o.Ou)(e);return(t,o)=>((0,a.Wz)(),(0,a.An)("div",S,[(0,a.QD)("div",C,[(0,a.QD)("div",W,[K,(0,a.QD)("p",_,(0,u.WA)((0,i.KV)(n))+" tasks to do",1)]),(0,a.QD)("div",I,[(0,a.QD)("button",{onClick:o[0]||(o[0]=t=>(0,i.KV)(e).addTask())},"+")])]),(0,a.QD)("div",z,[((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)((0,i.KV)(l),(t=>((0,a.Wz)(),(0,a.An)("div",{class:"task",key:t.key},[(0,a.QD)("div",F,[(0,a.wt)((0,a.QD)("input",{type:"checkbox","onUpdate:modelValue":e=>t.done=e,onClick:(0,s.Y7)((n=>{t.done=!0,(0,i.KV)(e).updateTasks()}),["prevent"])},null,8,U),[[s.cV,t.done]]),(0,a.wt)((0,a.QD)("input",{type:"text","onUpdate:modelValue":e=>t.task=e,onMouseleave:o[1]||(o[1]=t=>(0,i.KV)(e).updateTasks()),onFocusout:o[2]||(o[2]=t=>(0,i.KV)(e).updateTasks())},null,40,x),[[s.Og,t.task]])]),(0,a.QD)("p",j,(0,u.WA)(new Date(1e3*t.timestamp).toUTCString().slice(0,16)),1)])))),128)),(0,a.QD)("p",null,"Done ("+(0,u.WA)((0,i.KV)(c))+")",1),((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)((0,i.KV)(r),(t=>((0,a.Wz)(),(0,a.An)("div",{class:"task done",key:t.key},[(0,a.QD)("div",E,[(0,a.wt)((0,a.QD)("input",{type:"checkbox","onUpdate:modelValue":e=>t.done=e,onClick:(0,s.Y7)((n=>{t.done=!1,(0,i.KV)(e).updateTasks()}),["prevent"])},null,8,J),[[s.cV,t.done]]),(0,a.QD)("h2",null,(0,u.WA)(t.task),1)]),(0,a.QD)("p",L,(0,u.WA)(new Date(1e3*t.timestamp).toUTCString().slice(0,16)),1)])))),128))])]))}};const M=(0,V.c)(Y,[["__scopeId","data-v-67bb9f36"]]);var P=M;const B=t=>((0,a.ED)("data-v-802cd6e0"),t=t(),(0,a.ii)(),t),$={key:0,class:"tokenEditor"},G=B((()=>(0,a.QD)("label",{for:"token"},"Use your token",-1))),q=B((()=>(0,a.QD)("p",null,"Or generate a new one",-1))),H={class:"main"},R=B((()=>(0,a.QD)("div",{class:"head"},[(0,a.QD)("div",{class:"info"},[(0,a.QD)("h1",null,"Settings")])],-1))),X={class:"head"},Z=B((()=>(0,a.QD)("div",{class:"info"},[(0,a.QD)("h2",null,"Token")],-1))),tt={key:0,class:"add"},et=B((()=>(0,a.QD)("button",null,"+",-1))),nt=[et],st={class:"token"};var ot={__name:"SettingsView",setup(t){const e=ct(),n=(0,i.IL)(!e.tokenInitialised),o=(0,i.IL)("");return(t,l)=>((0,a.Wz)(),(0,a.An)(a.ae,null,[n.value?((0,a.Wz)(),(0,a.An)("div",$,[(0,a.QD)("form",null,[G,(0,a.wt)((0,a.QD)("input",{type:"text",name:"token",id:"token","onUpdate:modelValue":l[0]||(l[0]=t=>o.value=t)},null,512),[[s.Og,o.value]]),(0,a.QD)("button",{type:"submit",onClick:l[1]||(l[1]=t=>{(0,i.KV)(e).setToken(o.value),n.value=!1})},"Save")]),q,(0,a.QD)("button",{onClick:l[2]||(l[2]=t=>{(0,i.KV)(e).setToken(),n.value=!1})},"Generate")])):(0,a.g1)("",!0),(0,a.QD)("div",H,[R,(0,a.QD)("div",X,[Z,!1===(0,i.KV)(e).getToken()?((0,a.Wz)(),(0,a.An)("div",tt,nt)):(0,a.g1)("",!0)]),(0,a.QD)("p",st,(0,u.WA)((0,i.KV)(e).getToken()),1)])],64))}};const at=(0,V.c)(ot,[["__scopeId","data-v-802cd6e0"]]);var it=at;const lt=[{path:"/notes",name:"Notes",component:A,alias:["","/"]},{path:"/tasks",name:"Tasks",component:P},{path:"/settings",name:"Settings",component:it}],rt=(0,r.gv)({history:(0,r.Ow)(),routes:lt});var ut=rt;const ct=(0,o.O6)("data",{state:()=>({storedNotes:[],storedTasks:[],tokenInitialised:!0,networkFailed:!1}),getters:{notesCounter:t=>t.storedNotes.length,notes:t=>t.storedNotes,tasksCounter:t=>t.storedTasks.filter((t=>!1===t.done)).length,doneTasksCounter:t=>t.storedTasks.filter((t=>!0===t.done)).length,doneTasks:t=>t.storedTasks.filter((t=>!0===t.done)),tasks:t=>t.storedTasks.filter((t=>!1===t.done))},actions:{checkNetwork(){console.log("check networks"),l.c.get("https://nask.8279.ch/api/cĥeck").then((()=>{this.networkFailed=!1})).catch((()=>{this.networkFailed=!0}))},init(){const t=this.getToken();t?l.c.get("https://nask.8279.ch/api/datas",{headers:{Authorization:`Bearer ${t}`}}).then((t=>{console.log(t),this.storedNotes=t.data.notes,this.storedTasks=t.data.tasks,localStorage.setItem("notes",JSON.stringify(this.storedNotes)),localStorage.setItem("tasks",JSON.stringify(this.storedTasks)),this.networkFailed=!1})).catch((()=>{this.networkFailed=!0,this.storedNotes=JSON.parse(localStorage.getItem("notes")),this.storedTasks=JSON.parse(localStorage.getItem("tasks"))})):(this.tokenInitialised=!1,ut.push("/settings"))},getToken(){const t=localStorage.getItem("token");return void 0!==t?t:(this.tokenInitialised=!1,!1)},setToken(t=null){console.log(t),null===t?l.c.get("https://nask.8279.ch/api/token").then((e=>{console.log(e.data),t=e.data.token,localStorage.setItem("token",t),this.tokenInitialised=!0,this.init(),this.networkFailed=!1,ut.push("/")})).catch((()=>{this.networkFailed=!0,this.init()})):(localStorage.setItem("token",t),this.init(),ut.push("/"))},updateNotes(t,e){if(null===t)this.storedNotes.unshift(e);else{let n=this.storedNotes.find((e=>e.title===t.title&&e.note===t.note&&e.timestamp===t.timestamp));n.title=e.title,n.note=e.note}const n=this.getToken();n&&l.c.post("https://nask.8279.ch/api/notes",{notes:JSON.stringify(this.storedNotes)},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"multipart/form-data"}}).then((t=>{console.log(t),this.init(),this.networkFailed=!1})).catch((()=>{this.networkFailed=!0,this.init()}))},updateTasks(){const t=this.getToken();t&&l.c.post("https://nask.8279.ch/api/tasks",{tasks:JSON.stringify(this.storedTasks)},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}}).then((t=>{console.log(t),this.init(),this.networkFailed=!1})).catch((()=>{this.networkFailed=!0,this.init()}))},addTask(){this.storedTasks.unshift({done:!1,task:"New task",timestamp:Date.now()/1e3})}}}),dt={key:0,class:"nonetwork"};var kt={__name:"App",setup(t){const e=ct(),{networkFailed:n}=(0,o.Ou)(e);return setInterval(e.checkNetwork,1e3),e.init(),(t,e)=>{const s=(0,a.E1)("router-view"),o=(0,a.E1)("router-link");return(0,a.Wz)(),(0,a.An)(a.ae,null,[(0,a.K2)(s),(0,a.QD)("nav",null,[(0,a.K2)(o,{to:"/"},{default:(0,a.Ql)((()=>[(0,a.mY)("Notes")])),_:1}),(0,a.K2)(o,{to:"/tasks"},{default:(0,a.Ql)((()=>[(0,a.mY)("Tasks")])),_:1}),(0,a.K2)(o,{to:"/settings"},{default:(0,a.Ql)((()=>[(0,a.mY)("Settings")])),_:1})]),(0,i.KV)(n)?((0,a.Wz)(),(0,a.An)("div",dt," ⚠ no network = no save ")):(0,a.g1)("",!0)],64)}}};const pt=kt;var ht=pt;const vt=(0,o.Kw)();(0,s.W0)(ht).use(ut).use(vt).mount("#app")}},e={};function n(s){var o=e[s];if(void 0!==o)return o.exports;var a=e[s]={exports:{}};return t[s].call(a.exports,a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,s,o,a){if(!s){var i=1/0;for(c=0;c<t.length;c++){s=t[c][0],o=t[c][1],a=t[c][2];for(var l=!0,r=0;r<s.length;r++)(!1&a||i>=a)&&Object.keys(n.O).every((function(t){return n.O[t](s[r])}))?s.splice(r--,1):(l=!1,a<i&&(i=a));if(l){t.splice(c--,1);var u=o();void 0!==u&&(e=u)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[s,o,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,s){var o,a,i=s[0],l=s[1],r=s[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(r)var c=r(n)}for(e&&e(s);u<i.length;u++)a=i[u],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(c)},s=self["webpackChunkclient_mobile"]=self["webpackChunkclient_mobile"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=n.O(void 0,[999],(function(){return n(6712)}));s=n.O(s)})();
//# sourceMappingURL=app.e04b0150.js.map